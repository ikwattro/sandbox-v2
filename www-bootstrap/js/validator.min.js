/*!
 * Validator v0.1.0
 * https://github.com/xkeshi/validator
 *
 * Copyright (c) 2017 xkeshi
 * Released under the MIT license
 *
 * Date: 2017-02-07T03:02:09.435Z
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Validator=t()}(this,function(){"use strict";function e(e){return"object"===("undefined"==typeof e?"undefined":v(e))&&null!==e}function t(e){return"function"==typeof e}function n(t){if(!e(t))return!1;try{var n=t.constructor,r=n.prototype;return n&&r&&y.call(r,"isPrototypeOf")}catch(e){return!1}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from?Array.from(e).slice(t):g.call(e,t)}function a(t){for(var n=t===!0,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return n&&(t=i.shift()),e(t)&&i.length>0&&i.forEach(function(r){e(r)&&Object.keys(r).forEach(function(i){n&&e(t[i])?a(!0,t[i],r[i]):t[i]=r[i]})}),t}function i(e){return e.replace(p,"$1-$2").toLowerCase()}function o(e,t,n){var r=t.trim().split(h);return r.length>1?void r.forEach(function(t){return o(e,t,n)}):void(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n))}function u(e,t,n,r){var a=t.trim().split(h),i=n;return a.length>1?void a.forEach(function(t){return u(e,t,n)}):(r&&(n=function(){for(var r=arguments.length,a=Array(r),u=0;u<r;u++)a[u]=arguments[u];return o(e,t,n),i.apply(e,a)}),void e.addEventListener(t,n,!1))}function s(e,t,n){var r=void 0;return"function"==typeof Event&&"function"==typeof CustomEvent?r=void 0===n?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):void 0===n?(r=document.createEvent("Event"),r.initEvent(t,!0,!0)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(r)}var l={autoStart:!1,cache:!0,filter:null,messages:null,namespace:"",rules:null,stopOnError:!0,success:null,error:null,trigger:"",validators:null},c={required:"This field is required.",pattern:"Please enter a matched value.",min:"Please enter a value greater than or equal to %d.",max:"Please enter a value less than or equal to %d.",minlength:"Please enter at least %d characters.",maxlength:"Please enter no more than %d characters."},f={required:function(e){return""!==String(e)},pattern:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/.*/;return t.test(String(e))},minlength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return String(e).length>=t},maxlength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return String(e).length<=t},min:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)>=t},max:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return Number(e)<=t}},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=/\s+/,p=/([a-z\d])([A-Z])/g,g=Array.prototype.slice,y=Object.prototype.hasOwnProperty,b=/^(input|textarea|select)$/i,E=/^(checkbox|radio)$/i,k=/^m(in|ax)(length)?$/,A="success",w="error",S="undefined"!=typeof window?window.Validator:void 0,x=function(){function e(t,r){d(this,e);var i=this;n(r)||(r={}),i.element=t,i.options=a(!0,{},l,r),i.validators=a({},f,r.validators),i.messages=a({},c,r.messages),i.elements=[t],i.valid=!0,i.invalid=!1,i.init()}return m(e,[{key:"init",value:function(){var e=this,n=e.element,a=e.options;if(n.validator&&t(n.validator.destroy)&&n.validator.destroy(),n.validator=e,n.childElementCount&&!b.test(n.tagName)){var i=Object.keys(e.validators).map(function(t){return e.formatAttr(t)});e.elements=e.elements.concat(r(n.querySelectorAll("["+i.join("],[")+"]")))}a.trigger&&u(n,a.trigger,e.onStart=e.start.bind(e)),a.autoStart&&e.start()}},{key:"validate",value:function(e){var n=this,r=n.options,a=n.element,i=n.parseRules(e),o=Object.keys(i),l={rule:"",message:""},c="",f=!0;if(n.elements.indexOf(e)<0)throw new Error("The given element is invalid");o.length&&(b.test(e.tagName)?(c=e.value,E.test(e.type)&&!e.checked&&(c="")):c=e.textContent,t(r.filter)&&(c=r.filter(c)),o.forEach(function(t){var r=i[t];if(l.rule=t,f){var a=n.validators[t];f=a.call(n,c,r,e),f||!function(){var a=e.getAttribute(n.formatAttr(t,"message"))||e.getAttribute(n.formatAttr("message"))||n.messages[t]||e.title||"";Array.isArray(r)?r.forEach(function(e){a=a.replace("%s",e)}):a=a.replace("%s",r),l.message=a}()}}),f?(t(r.success)&&u(a,A,r.success,!0),s(e,A,l)):(t(r.error)&&u(a,w,r.error,!0),s(e,w,l),r.stopOnError&&n.stop()),n.valid=f,n.invalid=!f)}},{key:"parseRules",value:function(e){var t=this,n=t.options,r={};return n.cache&&e.parsedRules?r=e.parsedRules:(Object.keys(t.validators).forEach(function(n){var a=t.formatAttr(n);if(e.hasAttribute(a)){var i=e.getAttribute(a);"pattern"===n?i=RegExp(i):k.test(n)&&(i=Number(i)),r[n]=i}}),r=a(r,n.rules),n.cache&&(e.parsedRules=r)),r}},{key:"formatAttr",value:function(){for(var e=this.options,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.namespace&&n.unshift(e.namespace),i(n.join("-"))}},{key:"start",value:function(e){var t=this;t.starting||(t.starting=!0,e&&e.target?t.validate(e.target):t.elements.forEach(function(e){t.starting&&t.validate(e)}),t.starting=!1)}},{key:"stop",value:function(){this.starting=!1}},{key:"isValid",value:function(e){var t=this;return e?t.validate(e):t.start(),t.valid}},{key:"isInvalid",value:function(e){var t=this;return e?t.validate(e):t.start(),t.invalid}},{key:"destroy",value:function(){var e=this,t=e.element,n=e.options;e.stop(),n.trigger&&o(t,n.trigger,e.onStart),n.cache&&e.elements.forEach(function(e){return delete e.parsedRules}),delete t.validator}}],[{key:"setDefaults",value:function(e){a(!0,l,e)}},{key:"setMessages",value:function(e){a(c,e)}},{key:"setValidators",value:function(e){a(f,e)}},{key:"noConflict",value:function(){return"undefined"!=typeof window&&(window.Validator=S),e}}]),e}();return x});